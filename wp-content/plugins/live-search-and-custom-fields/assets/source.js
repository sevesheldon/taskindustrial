function filterThemeSettings(){var a=jQuery,b=this;return this.init=function(){b.initResetButtonExtraOpt(),b.manageExtraThemeOptions(),a(".filter-main-color").colorPicker()},this.initResetButtonExtraOpt=function(){var b=a("#px-reset-button:checked").length>0?1:0;1==b&&a("#single-filter-reset-button-opt").fadeIn(),a("#reset-button-checkbox").click(function(){var b=a("#px-reset-button:checked").length>0?1:0;1==b?a("#single-filter-reset-button-opt").hide():a("#single-filter-reset-button-opt").fadeIn()})},this.manageExtraThemeOptions=function(){a(".theme-style-type").on("click",function(){var b=parseInt(a(this).attr("data-columns")),c=parseInt(a(this).attr("data-viewchanger")),d=parseInt(a(this).attr("data-link-type"));1==c?a(".pxfilter-style-multiple-views").fadeIn():a(".pxfilter-style-multiple-views").hide(),0==b?a(".theme-columns-opt").hide():a(".theme-columns-opt").fadeIn(),1==d?a(".pxfilter-style-link-type").fadeIn():a(".pxfilter-style-link-type").hide()})},this.init()}function is_step2_active(){var a=jQuery,b=!1;return function(){b||(b=!0,a('.step2 input[type="checkbox"]').each(function(){a(this).click(function(){a('.step2 input[type="checkbox"]').each(function(){var b=a(this).attr("checked")?1:0;if(a(".step2").addClass("active"),1==b)return!1})})}))}}function LscfWooCommerce(){var a=jQuery,b=this,c=adminData.lscf_url;return this.template={type:"woocommerce",tax:{headline:"WooCommerce data filter",items:[],templateUrl:c+"assets/js/templates/filter/tax-woocommerce-template.html"}},this.init_tax_subcategories,this.callbacks={},this.callbacks.getPostTaxonomies=function(c){var d="<h4>WooCommerce data filter </h4>",e=0;b.template.tax.items=[],a("#px_post_categories").html(d),c.forEach(function(a){var c=!0;if("undefined"!=typeof a.parent_categs){var d={};switch(d.index=e,d.name=a.taxonomy.replace("pa_","").replace("_"," "),d.taxonomy=a.taxonomy,d.unsorted_subcategories=a.unsorted_subcategs,d.hasThumb=0,a.taxonomy){default:if(d.type="attribute",a.taxonomy.match(/^pa_(.*)/)){c=!1,d.hasThumb=1;var f=a.taxonomy.match(/^pa_(.*)/),g=f[1].replace(/\b\w/g,function(a){return a.toUpperCase()}),h="<label>Filter by</label> Product Attributes - <strong>"+g+"</strong></span><br/>"}break;case"product_type":c=!1;var g="Product Types",h="<label>Filter by</label> <strong>Product Type</strong></span><br/>";break;case"product_cat":c=!1;var g="Product Categories",h="<label>Filter by</label> <strong>Product Categories</strong></span><br/>";break;case"product_tag":c=!1;var g="Product Tags",h="<label>Filter by</label> <strong>Product Tags</strong></span><br/>"}0==c&&(d.headline=h,d.title=g,d.categs=[],"undefined"!=typeof a.parent_categs&&null!==a.parent_categs&&(a.parent_categs.forEach(function(b,c){var e="";if("undefined"!=typeof b.has_subcategories&&1===b.has_subcategories&&"undefined"!=typeof b.data){e="has-subcategs",b.subcategs={parent_name:b.data.name,parent_id:b.data.term_id,list:"",items:[]};var f=0;a.subcategs[b.data.term_id].forEach(function(a){f<=5&&(b.subcategs.list+=a.name+", "),b.subcategs.items.push(a),f++}),b.subcategs.list=b.subcategs.list.substring(0,b.subcategs.list.length-2)+".."}else b.subcategs=!1;b.className=e,d.categs.push(b)}),d.has_subcategories="undefined"!=typeof a.has_subcategories?a.has_subcategories:0,d.subcategs="undefined"!=typeof a.subcategs?a.subcategs:"",b.template.tax.items.push(d),e++))}}),a.get(b.template.tax.templateUrl,function(c){var d=Mustache.render(a(c).filter("#template-tax-woocommerce").html(),b.template.tax);a("#px_post_categories").html(d);for(var f=0;f<e;f++)checkAllCheckboxes(a(".px-post-tax"+f+" .tax-categories-container")),checkAllCheckboxes(a(".px-post-tax"+f+" .tax-subcategories-display"),!0);setTimeout(function(){isStep2Active()},400),init_custom_dropdown(a(".post-categories-group")),setTimeout(function(){b.init_tax_subcategories(),lscf_taxonomies_subcategories_view_type()},400)}),0==e?a(".post-categories-group .expandable-container-headline").addClass("inactive"):a(".post-categories-group .expandable-container-headline").removeClass("inactive")},{callbacks:b.callbacks}}function PX_pluginLF(){var a=this,b="px-plugin-ajax",c=adminData.ajaxURL;this.postType="",this.callbacks,this.template={tax:{items:[],templateUrl:adminData.lscf_url+"assets/js/templates/filter/tax-template.html"},tax_subcategs:{items:{},templateUrl:adminData.lscf_url+"assets/js/templates/filter/tax-subcategs-template.html"},custom_fields:{items:{},templateUrl:adminData.lscf_url+"assets/js/templates/filter/custom-fields-template.html"},additional_fields:{items:[]}},this.isWooCommerce=!1,this.init=function(){a.removeAdditionalFilterFields(),a.sanitizeAdditionalFilterFieldsName(),a.addAdditionalFields(),$j("#px_filter-name-shorcode-generator").keydown(function(a){if(13==a.keyCode)return a.preventDefault(),!1});var b=document.getElementById("px_filter-name-shorcode-generator");null!==b&&b.length>0&&(document.getElementById("px_filter-name-shorcode-generator").onkeydown=function(a){if(13==a.keyCode){if(""===$j("#px_filter-name-shorcode-generator").val())return $j("#px_filter_name_error").fadeIn(),!1;$j("#goToFilterFields").hide(),$j("#px_filter_name_error").hide(),$j(".lscf-step-2").fadeIn(),$j("#active-shortcodes-list").hide()}}),$j("#goToFilterFields").click(function(){return""===$j("#px_filter-name-shorcode-generator").val()?($j("#px_filter_name_error").fadeIn(),!1):($j("#px_filter_name_error").hide(),$j(this).hide(),$j(".lscf-step-2").fadeIn(),void $j("#active-shortcodes-list").hide())}),$j(".cf-remove-custom-post").each(function(){$j(this).click(function(b){b.stopPropagation(),b.preventDefault();var c=$j(this).closest(".px-post-type-row"),d=$j(this).closest(".px-post-type-row").data("key"),e=confirm("Are you sure you want to remove the custom post type?");!0===e&&a.removeCustomPostType_ajaxRequest(d,function(){c.remove()})})}),$j(".remove-custom-post").each(function(b){$j(this).click(function(){var b=$j(this).parent().data("key");a.removeCustomPostType_ajaxRequest(b,function(){window.location.reload()})})}),$j("#create-new-custom-post").click(function(){var b=$j("#customPostName").val();"undefined"!=typeof b&&""!=b&&a.addNewCustomPostType_ajaxRequest(b)}),$j(".expandable-container-headline").each(function(a){$j(this).click(function(){if(!$j(this).hasClass("inactive"))if($j(this).hasClass("active")?$j(this).removeClass("active"):$j(this).addClass("active"),$j(".expandable-container").eq(a).hasClass("active"))$j(".expandable-container").eq(a).css({"min-height":"0px"}),$j(".expandable-container").eq(a).animate({height:"0px"},300,function(){$j(".expandable-container").eq(a).removeClass("active")});else{$j(".expandable-container").eq(a).addClass("active");var b=$j(".expandable-container").eq(a).find(".data-container").height();b=b<170?"180":b,$j(".expandable-container").eq(a).animate({height:Math.round(b)},300,function(){$j(".expandable-container").eq(a).css({"min-height":b+"px",height:"auto"}),$j(".expandable-container").eq(a).hasClass("filter-display-settings")&&!$j(".expandable-container").eq(a).hasClass("slick-active")&&($j(".expandable-container").eq(a).addClass("slick-active"),setTimeout(function(){$j(".theme-options-slider").slick({infinite:!1})},200))})}})}),setTimeout(function(){$j(".px_lf_post-type").find(".pxselect-options li").each(function(){$j(this).click(function(){var b=$j(this).attr("rel"),c=$j(this).text();"Products(WooCommerce)"===c?($j("#px-filter-for").val("woocommerce"),a.isWooCommerce=!0):($j("#px-filter-for").val("custom-posts"),a.isWooCommerce=!1),a.callbacks.isWooCommerce=a.isWooCommerce,$j("#px_additional-fields-container").empty(),0!=b?$j(".step1").addClass("active"):$j(".step1").removeClass("active"),a.postType=b,a.getCustomFieldsByPostType(b,null,a.callbacks.getCustomFieldsByPostType),!0===a.isWooCommerce?($j(".post-categories-group .expandable-container-headline").html("WooCommerce"),a.getPostCategories(b,LscfWooComm.callbacks.getPostTaxonomies)):($j(".post-categories-group .expandable-container-headline").html("Categories"),a.getPostCategories(b,a.callbacks.get_post_categories_callback)),a.getCustomFieldsByPostType(b,["date","text"],function(b){var c="";if("undefined"!=typeof b.success&&1==b.success){var b=b.data.data;b.success=1,b.fields.forEach(function(a){c+="px-theme-price"==a.slug?'<li><input type="radio" id="'+a.slug.toLowerCase()+'_radio"  class="px_radiobox-input " name="px_filter-featured-posts-label" value="'+a.slug+'"><label class="px_radiobox" for="'+a.slug.toLowerCase()+'_radio"></label>Price <i>(theme featured fields)</i></li>':'<li><input type="radio" id="'+a.value.toLowerCase()+'_radio" class="px_radiobox-input " name="px_filter-featured-posts-label" value="'+a.value+'"><label class="px_radiobox" for="'+a.value.toLowerCase()+'_radio"></label>'+a.name+"</li>"})}"undefined"!=typeof b.success&&1==b.success||a.isWooCommerce?(a.isWooCommerce&&(c+='<li><input type="radio" id="px-woocommerce-featured-price" class="px_radiobox-input " name="px_filter-featured-posts-label" value="woocommerce-featured-price"><label class="px_radiobox" for="px-woocommerce-featured-price"></label>Price(WooCommerce)</li>'),$j(".px_featured-field").find("h4").show(),$j("#setAsFeaturedField").html(c),$j(".featured-fields-group .expandable-container-headline").removeClass("inactive"),$j("#setAsFeaturedField .px_radiobox").each(function(){$j(this).click(function(){$j(".featured-fields-group.step3").addClass("active")})})):($j(".featured-fields-group .expandable-container-headline").addClass("inactive"),$j(".px_featured-field").find("h4").hide(),$j("#setAsFeaturedField").html(""))})})})},700),$j("#pxcf_generate-shortcode").click(function(){var b=$j("#generateshortcode-form").serializeArray();if($j(".lscf-custom-theme:checked").length>0){var c=$j(".lscf-custom-theme:checked").attr("data-url"),d=$j(".lscf-custom-theme:checked").attr("data-name");b.push({name:"filter-custom-theme-url",value:c}),b.push({name:"filter-custom-theme-name",value:d})}var e=a.postType,f=$j(".colorpick-rgba").attr("style"),g=f.match(/background-color\:(.+?);/),h=g[1].replace(/rgb\(|\)/g,"");if(b.length>0){if(null==b[0].value||""==b[0].value)return void $j("#px_filter_name_error").fadeIn();b.push({name:"filter-main-color-rgb",value:h}),a.generateShortCode(b,e,function(b){a.callbacks.generateShortCode_callback(b),a.removeFilterShortcode(),$j(".step4").addClass("active")})}}),a.removeFilterShortcode()},this.sanitizeAdditionalFilterFieldsName=function(){$j("#px_additional-fields-container").on("blur",".px_sanitize-OnBlur",function(){var a=$j(this).parent(),b=$j(this).val();""!=b&&(b=pxSanitize(b),a.find(".px_sanitized-key").val(b))})},this.addAdditionalFields=function(){$j("#px_add-additional-field").click(function(){var b=$j("#px_additional-fields").val();if(""==b||null==b)return void alert("Please select an option");var c=$j("#px-filter-selected-post-type").val();switch(b){case"search":var d=$j(".px_additional-fields-row.px_search").length;if(!0===a.isWooCommerce){if(d>1)return void alert("The filter with WooCommerce can have only 2 fields of this type")}else if(d>0)return void alert("The filter can have only 1 field of this type");if(a.isWooCommerce){var e=$j(".px_search")?$j(".px_search").length:0,f='<div class="px_additional-fields-row px_search">';f+='<div class="left-side">',f+="<label>Type:</label><strong>Search</strong><br/>",f+='<span class="px_remove px_remove-additional-field">Remove</span>',f+="</div>",f+='<div class="right-side">',f+='<label>Field Name:</label><input type="text" name="px_search_field_name_'+e+'" value="">',f+='<div class="clear"></div><div class="px-woocommerce-search-fields"><input class="px_radiobox-input" name="px_search_by_'+e+'" checked="checked" type="radio" id="px_search_by_default_'+e+'" value="default">',f+='<label class="px_radiobox theme-field" for="px_search_by_default_'+e+'"></label><span>Default</span>',f+='<input class="px_radiobox-input" name="px_search_by_'+e+'" type="radio" id="px_search_by_sku_'+e+'" value="sku">',f+='<label class="px_radiobox theme-field" for="px_search_by_sku_'+e+'"></label><span>Product SKU</span>',f+="</div>",f+="</div><!---End right-side-->",f+="</div>"}else{var f='<div class="px_additional-fields-row px_search">';f+='<div class="left-side">',f+="<label>Type:</label><strong>Search</strong><br/>",f+='<span class="px_remove px_remove-additional-field">Remove</span>',f+="</div>",f+='<div class="right-side">',f+='<label>Field Name:</label><input type="text" name="px_search_field_name" value="">',f+="</div><!---End right-side-->",f+="</div>"}$j("#px_additional-fields-container").prepend(f);break;case"range":a.getCustomFieldsByPostType(c,["number"],function(b){if(1==b.success&&"undefined"!=typeof b.data.data.fields||!0===a.isWooCommerce){var c=$j(".px_range")?$j(".px_range").length:0,d="",e='<div class="px_additional-fields-row px_range">';if(1==b.success&&"undefined"!=typeof b.data.data.fields){var f=b.data.data.fields;f.forEach(function(a){"px-theme-price"==a.slug?(d+='<input class="px_radiobox-input" name="px_range-fieldID-'+c+'" type="radio" id="px-theme-price" value="px-theme-price">',d+='<label class="px_radiobox theme-field" for="px-theme-price"></label><span>Price <i>(theme featured fields)</i></span>'):(d+='<input class="px_radiobox-input" name="px_range-fieldID-'+c+'" type="radio" id="'+a.ID+"-"+c+'_radio" value="'+a.value+'">',d+='<label class="px_radiobox" for="'+a.ID+"-"+c+'_radio"></label><span>'+a.name+"</span>")})}!0===a.isWooCommerce&&(d+='<div class="clear"></div><div class="px-woocommerce-range-fields">',d+='<input class="px_radiobox-input" name="px_range-fieldID-'+c+'" type="radio" id="px-woocommerce-price" value="px-woocommerce-price">',d+='<label class="px_radiobox theme-field" for="px-woocommerce-price"></label><span>Price <i>(WooCommerce)</i></span>',d+='<input class="px_radiobox-input" name="px_range-fieldID-'+c+'" type="radio" id="px-woocommerce-inventory" value="px-woocommerce-inventory">',d+='<label class="px_radiobox theme-field" for="px-woocommerce-inventory"></label><span>Stock quantity <i>(WooCommerce)</i></span>',d+="</div>"),e+='<div class="left-side">',e+="<label>Type:</label><strong>Range</strong><br/>",e+='<span class="px_remove px_remove-additional-field">Remove</span>',e+="</div>",e+='<div class="right-side">',e+='<div class="px-frow">',e+='<label>Field Name:</label><input class="px_sanitize-OnBlur" type="text" name="px_range-name-'+c+'" value=""/>',e+="</div>",e+='<div class="px-frow min-max">',e+='<input class="px_sanitized-key" type="hidden" name="px_range-key-'+c+'" value=""/>',e+='<label>Min Value:</label><input type="number" name="px_range-max-'+c+'" value=""/>',e+='<label class="float-right center">Max Value:</label><input type="number" name="px_range-min-'+c+'" value=""/>',e+="</div>",e+='<div class="px-frow">',e+='<label class="wide">Range value\'s label(optional; ex:$,€,£)</label><input type="text" name="px_range-label-'+c+'" value=""/>',e+="</div>",e+='<div class="px-frow">',e+='<label class="wide">Show range for:</label>',e+='<div class="px_custom-fields-range float-right">'+d+"</div>",e+="</div>",e+="</div><!---End .right-side",e+="</div>",$j("#px_additional-fields-container").prepend(e)}else alert("There is no any number/text field type for selected Post Type. Go to post's fields to add a number/text field type'")});break;case"date-interval":a.getCustomFieldsByPostType(c,["date"],function(a){if(1==a.success&&"undefined"!=typeof a.data.data.fields){var b=$j(".px_date-interval")?$j(".px_date-interval").length:0,c=a.data.data.fields,d="",e='<div class="px_additional-fields-row px_date-interval">';c.forEach(function(a){d+='<input class="px_radiobox-input" name="px_date-interval-fieldID-'+b+'" type="radio" id="'+a.ID+'" value="'+a.value+'">',d+='<label class="px_radiobox" for="'+a.ID+'"></label><span>'+a.name+"</span>"}),e+='<div class="left-side">',e+="<label>Type:</label><strong>Date Interval</strong><br/>",e+='<span class="px_remove px_remove-additional-field">Remove</span>',e+="</div>",e+='<div class="right-side">',e+='<div class="px-frow">',e+="<label>Field Name</label>",e+='<input class="px_sanitize-OnBlur" type="text" name="px_date-interval-name-'+b+'" value=""/>',e+="</div>",e+='<div class="px-frow">',e+='<input class="px_sanitized-key" type="hidden" name="px_date-interval-key-'+b+'" value=""/>',e+='<label class="wide">Show Date Interval for:</label>',e+='<div class="px_custom-fields-date-interval float-right">'+d+"</div>",e+="</div>",e+="</div>",e+="</div>",$j("#px_additional-fields-container").prepend(e)}else alert('There is no any "Date" field type for current Post Type. Go to Post\'s field to add a "Date" field ')})}})},this.removeAdditionalFilterFields=function(){$j("#px_additional-fields-container").on("click",".px_remove-additional-field",function(){var a=$j(this).closest(".px_additional-fields-row");a.remove()})},this.removeFilterShortcode=function(){$j(".px_remove-shortcode").on("click",function(){var b=$j(this).data("id");$j(this).data("post");a.removeShortcode(b,$j(this).closest(".single-shortcode"),a.callbacks.removeShortcode_callback)})},this.removeCustomPostType_ajaxRequest=function(a,d){$j.ajax({type:"POST",url:c,data:{action:b,section:"removeCustomPostType",key:a},success:function(a){null!=d&&d(a)},dataType:"html"})},this.getPostCategories=function(a,d){$j.ajax({type:"POST",url:c,data:{action:b,section:"getPostCategories",post_type:a},success:function(a){d(a)},dataType:"json"})},this.addNewCustomPostType_ajaxRequest=function(a){$j.ajax({type:"POST",url:c,data:{action:b,section:"addNewCustomPostType",name:a},success:function(a){document.cookie="px_new_custom_post=1",window.location.reload()},dataType:"html"})},this.getCustomFieldsByPostType=function(a,d,e){$j.ajax({type:"POST",url:c,data:{action:b,section:"getPostType_customFields",fieldType:d,post_type:a},success:function(a){e(a)},dataType:"json"})},this.generateShortCode=function(a,d,e){$j.ajax({type:"POST",url:c,data:{action:b,section:"generateShortcode",fieldsData:a,postType:d},success:function(a){e(a)},dataType:"json"})},this.removeShortcode=function(a,d,e){$j.ajax({type:"POST",url:c,data:{action:b,section:"removeShortcode",filterID:a},success:function(a){e(d,a)},dataType:"json"})}}function ajaxCallbacks(){var a=this;this.isWooCommerce=!1,this.template=PX_pluginLF.template,this.initCustomFields=function(){$j(".post-custom-fields-group").each(function(){$j(this).find(".px-inline").each(function(){var a=$j(this);$j(this).find(".px-checkbox-label").click(function(){var b=a.find('input[type="checkbox"]:checked').length>0?1:0;1===b?a.find(".select").addClass("inactive"):a.find(".select").removeClass("inactive")})})})},this.getCustomFieldsByPostType=function(b){if(1==b.success||!0===a.isWooCommerce){var c=b.success,d={fields:[],woo_fields:!1};if(1==c){var b=b.data.data;b.fields.forEach(function(a){switch(a.slug){case"px_radio_box":a.display_as=[{value:"default",name:"Display as"},{value:"px_radio_box",name:"Radio"},{value:"px_select_box",name:"Dropdown"}],a.multiple_display=!0;break;case"px_select_box":a.display_as=[{value:"default",name:"Display as"},{value:"px_radio_box",name:"Radio"},{value:"px_select_box",name:"Dropdown"}],a.multiple_display=!0;break;case"px_check_box":a.display_as=[{value:"default",name:"Display as"},{value:"px_radio_box",name:"Radio"},{value:"px_select_box",name:"Dropdown"},{value:"px_check_box",name:"Checkbox"}],a.multiple_display=!0;break;case"px_icon_check_box":a.display_as=[{value:"default",name:"Display as"},{value:"px_radio_box",name:"Radio"},{value:"px_select_box",name:"Dropdown"},{value:"px_check_box",name:"Checkbox"},{value:"px_check_icon-text_box",name:"Icon w text"},{value:"px_check_icon-only_box",name:"Icon only"}],a.multiple_display=!0;break;default:case"px_date":a.display_as=!1,a.multiple_display=!1}}),d.fields=b}if(!0===a.isWooCommerce){d.woo_fields=[];var e=[{ID:"px-woocommerce-instock-field",field_form_id:"",name:"In stock/out of stock (WooCommerce)",slug:"px-woocommerce-instock",value:"woocommerce-instock"}];d.woo_fields=e}a.template.custom_fields.items=d,$j.get(a.template.custom_fields.templateUrl,function(c){var d=Mustache.render($j(c).filter("#px-filter-custom-fields-template").html(),a.template.custom_fields.items);document.getElementById("px_post_fields").innerHTML=d,document.getElementById("px_post_fields").setAttribute("data-post",b.post_type),checkAllCheckboxes($j("#px_post_fields"),!0),$j(".post-custom-fields-group .expandable-container-headline").removeClass("inactive"),$j(".px_dynamic-field").each(function(){$j(this).show()}),setTimeout(function(){isStep2Active(),init_custom_dropdown($j(".post-custom-fields-group")),a.initCustomFields()},400)})}$j(".post-custom-fields-group .expandable-container-headline").each(function(){$j(this).hasClass("always-active")||$j(this).addClass("inactive")}),document.getElementById("px_post_fields").innerHTML="",$j(".px_dynamic-field").each(function(){$j(this).show()})},this.generateShortCode_callback=function(a){var b="<li>Filter name:<strong>"+a.name+'</strong><span data-id="'+a.filterID+'" data-post="'+a.post_type+'" class="px_remove-shortcode px_removeOption" >Remove</span><br/><textarea style="width:100%; text-align:left" rows="5" readonly="readonly">[px_filter id="'+a.filterID+'" post_type="'+a.post_type+'" featured_label="'+a.featuredLabel+'"]</textarea><br/><i>Filter shortcode - copy shortcode to page editor for filter to show</i><hr/></li>';$j("ul#pxGenerateShortcodesContainer").prepend(b)},this.removeShortcode_callback=function(a,b){if(1==b.success)return void a.hide()},this.get_post_categories_callback=function(b){var c=0;a.template.tax.items=[],b.forEach(function(b){if("undefined"!=typeof b.parent_categs){var d={};d.index=c,d.title=b.taxonomy,d.taxonomy=b.taxonomy,d.unsorted_subcategories=b.unsorted_subcategs,d.categs=[],b.parent_categs.forEach(function(a,c){var e="";if("undefined"!=typeof a.has_subcategories&&1===a.has_subcategories){e="has-subcategs",a.subcategs={parent_name:a.data.name,parent_id:a.data.term_id,list:"",items:[]};var f=0;b.subcategs[a.data.term_id].forEach(function(b){f<=5&&(a.subcategs.list+=b.name+", "),a.subcategs.items.push(b),f++}),a.subcategs.list=a.subcategs.list.substring(0,a.subcategs.list.length-2)+".."}else a.subcategs=!1;a.className=e,d.categs.push(a)}),d.has_subcategories="undefined"!=typeof b.has_subcategories?b.has_subcategories:0,d.subcategs="undefined"!=typeof b.subcategs?b.subcategs:"",a.template.tax.items.push(d),c++}}),$j.get(a.template.tax.templateUrl,function(b){var d=Mustache.render($j(b).filter("#template-tax-posts").html(),a.template.tax);$j("#px_post_categories").html(d);for(var e=0;e<c;e++)checkAllCheckboxes($j(".px-post-tax"+e+" .tax-categories-container")),checkAllCheckboxes($j(".px-post-tax"+e+" .tax-subcategories-display"),!0);setTimeout(function(){isStep2Active(),init_custom_dropdown($j(".post-categories-group"))},400),setTimeout(function(){a.init_tax_subcategories(),lscf_taxonomies_subcategories_view_type()},400)}),0==c?$j(".post-categories-group .expandable-container-headline").addClass("inactive"):$j(".post-categories-group .expandable-container-headline").removeClass("inactive")},this.init_tax_subcategories=function(){$j(".taxonomies-block .px-post-categories").each(function(a){var b=$j(this);b.closest(".tax-categories-container").find(".tax-list-check-all").click(function(){var c=b.find("li.has-subcategs").length,d=b.closest(".tax-categories-container").find(".tax-list-check-all-checkbox:checked").length>0?1:0;1===d&&c>0?($j(".tax-subcategories-display").eq(a).hide(),$j(".tax-subcategories-display").eq(a).find(".px-inline").hide(),b.attr("data-active-parent-count",0)):c>0&&($j(".tax-subcategories-display").eq(a).fadeIn(),$j(".tax-subcategories-display").eq(a).find(".px-inline").fadeIn(),b.attr("data-active-parent-count",c))}),$j(this).find(".has-subcategs").find(".px-checkbox-label").each(function(){$j(this).click(function(){var c=parseInt(b.attr("data-active-parent-count")),d=$j(this).parent("li"),e=d.find('input[type="checkbox"]:checked').length>0?1:0,f=d.find('input[type="checkbox"]').val().split("!#"),g=f[0];1===e?(c--,c<1&&$j(".tax-subcategories-display").eq(a).hide(),b.attr("data-active-parent-count",c),$j(".subcateg-view-"+g).hide()):(c<1&&$j(".tax-subcategories-display").eq(a).fadeIn(),c++,b.attr("data-active-parent-count",c),$j(".subcateg-view-"+g).fadeIn())})})}),$j(".tax-subcategories-display").each(function(){$j(this).find(".px-inline").each(function(){var a=$j(this);$j(this).find(".px-checkbox-label").click(function(){var b=a.find('input[type="checkbox"]:checked').length>0?1:0;1===b?a.find(".select").addClass("inactive"):a.find(".select").removeClass("inactive")})})})}}function pxSanitize(a){return a.trim().toLowerCase().replace(/([\!\@\#\$\%\^\&\*\(\[\)\]\{\-\}\\\/\:\;\+\=\.\<\,\>\?\~\`\'\" ]+)/g,"_")}function lscf_taxonomies_subcategories_view_type(){var a,b=jQuery;is_checked=!1,b(".lscf-hierarchy-subcategories-display").each(function(c){b(this).click(function(){b(".lscf-subcategories-independent-display").eq(c).removeAttr("checked"),is_checked=!!b(this).is(":checked"),a=b(this).closest(".taxonomies-block"),!0===is_checked?(a.find(".lscf-tax-all-subcategories").hide(),a.find(".lscf-tax-all-subcategories").find('input[type="checkbox"]').each(function(){b(this).removeAttr("checked")}),a.find(".lscf-hierarchy-subcategories-container").fadeIn()):(a.find(".lscf-tax-all-subcategories").fadeIn(),a.find(".lscf-hierarchy-subcategories-container").hide())})}),b(".lscf-subcategories-independent-display").each(function(c){b(this).click(function(){b(".lscf-hierarchy-subcategories-display").eq(c).removeAttr("checked"),is_checked=!!b(this).is(":checked"),a=b(this).closest(".taxonomies-block"),!0===is_checked?(a.find(".lscf-tax-all-subcategories").hide(),a.find(".lscf-tax-all-subcategories").find('input[type="checkbox"]').each(function(){b(this).removeAttr("checked")}),a.find(".lscf-hierarchy-subcategories-container").fadeIn()):(a.find(".lscf-tax-all-subcategories").fadeIn(),a.find(".lscf-hierarchy-subcategories-container").hide())})})}function checkAllCheckboxes(a,b){jQuery;a.find(".tax-list-check-all").click(function(){var c=a.find(".tax-list-check-all").attr("for"),d=$j("#"+c+":checked").length>0?1:0;a.find('input[type="checkbox"]').each(function(){$j(this).hasClass("tax-list-check-all-checkbox")||(1==d?(!0===b&&$j(this).closest(".px-inline").find(".select").addClass("inactive"),$j(this).removeAttr("checked")):(!0===b&&$j(this).closest(".px-inline").find(".select").removeClass("inactive"),$j(this).attr({checked:"checked"})))})})}function LscfSettings(){var a=jQuery,b=this,c="px-plugin-ajax",d=adminData.ajaxURL;this.init=function(){b.reset_button_on_check()},this.reset_button_on_check=function(){a("#reset-button-checkbox").click(function(){var b=a("#px-reset-button:checked").length>0?1:0;1==b?a(this).closest(".lscf-opt").find(".lscf-extra-opt").removeClass("active"):a(this).closest(".lscf-opt").find(".lscf-extra-opt").addClass("active")})},this.saveSettings=function(){a("#lscf-save-settings").click(function(){a(".saving-status").removeClass("saved"),a(".saving-status").addClass("loading");var c=a(".colorpick-rgba").attr("style"),d=c.match(/background-color\:(.+?);/),e=d[1].replace(/rgb\(|\)/g,""),f=a(".colorpick-rgba").val(),g=a("#px-filter-posts-count").val(),h=a("#px-posts-page-count").val(),i={status:a("#px-reset-button:checked").length>0?a("#px-reset-button").val():0,name:a("#reset-button-extra-options").find('input[name="reset-button-name"]').val(),position:a("#reset-button-extra-options").find('input[name="reset-button-possition"]:checked').val()},j=a("#px-grid-view:checked").length>0?a("#px-grid-view").val():0,k=a("#lscf-see-more-writing").val(),l=a("#lscf-see-less-writing").val(),m=a("#lscf-load-more-writing").val(),n=a("#lscf-select-writing").val(),o=a("#lscf-any-writing").val(),p=a("#lscf-view-writing").val(),q=a("#lscf-filter-mobile-writing").val(),r=a("#lscf-add-to-cart-writing").val(),s={color:{color:f,rgb:e},posts_per_page:{posts_only:h,filter:g},reset_button:i,block_view:j,see_more_writing:k,see_less_writing:l,load_more_writing:m,any_writing:o,select_writing:n,view_writing:p,filter_writing:q,add_to_cart:r};b.saveSettingsAjaxRequest(s,function(b){a(".saving-status").removeClass("loading"),a(".saving-status").addClass("saved")})})},this.saveSettingsAjaxRequest=function(b,e){a.ajax({type:"POST",url:d,data:{action:c,section:"save-general-settings",settings:b},success:function(a){e(a)},dataType:"html"})}}function getCookie(a){var b="; "+document.cookie,c=b.split("; "+a+"=");return 2==c.length&&c.pop().split(";").shift()}function init_custom_dropdown(a){jQuery;a.find(".custom-select-type-1").each(function(){var a=$j(this).attr("data-class"),b=$j(this),c=$j(this).children("option").length;b.addClass("s-hidden"),b.wrap('<div class="select '+a+'"></div>'),b.after('<div class="styledSelect"></div>');var d=b.next("div.styledSelect");d.text(b.children("option").eq(0).text());for(var e=$j("<ul />",{class:"options"}).insertAfter(d),f=0;f<c;f++)$j("<li />",{text:b.children("option").eq(f).text(),rel:b.children("option").eq(f).val()}).appendTo(e);var g=e.children("li");d.click(function(a){$j(this).closest(".select").hasClass("inactive")||$j(this).closest(".select").hasClass("not-available")||(a.stopPropagation(),$j("div.styledSelect.active").each(function(){$j(this).removeClass("active").next("ul.options").hide()}),$j(this).toggleClass("active").next("ul.options").toggle())}),g.click(function(a){a.stopPropagation(),d.text($j(this).text()).removeClass("active"),b.val($j(this).attr("rel")),e.hide()}),$j(document).click(function(){d.removeClass("active"),e.hide()})})}function ImportExportCustomFields(){var a=jQuery,b=this,c="px-plugin-ajax",d=adminData.ajaxURL;this.init=function(){a("#lscf-export-cf").click(function(){a("#export-custom-fields-form").submit()}),a("#submit-export-custom-posts-list").click(function(){a("#export-custom-posts-list").submit()}),a("#lscf-submit-import").click(function(){a("#lscf-import-cf").submit()}),a("#lscf-submit-form-cp").click(function(){a("#lscf-import-cp-form").submit()}),b.checkAllPostsInit()},this.serializeCustomPostsList=function(){var a=document.forms["export-custom-fields"],c=[],d=!1;if("undefined"==typeof a)return!1;var e=a.elements;for(key in e)if(b.isInt(key))switch(e[key].type){case"checkbox":e[key].checked===!0&&(c.push(e[key].value),d=!0)}return!!d&&c},this.isInt=function(a){return!isNaN(a)&&parseInt(Number(a))==a&&!isNaN(parseInt(a,10))},this.exportToJson=function(b,e){a.ajax({type:"POST",url:d,data:{action:c,section:"export-custom-fields-to-json",postsList:b},success:function(a){e(a)},dataType:"html"})},this.checkAllPostsInit=function(){checked=!1,a("#export-all-c_posts").click(function(){checked=!checked,!0===checked?a('.lscf-custom-posts input[type="checkbox"]').each(function(){a(this).attr({checked:"checked"})}):a('.lscf-custom-posts input[type="checkbox"]').each(function(){a(this).removeAttr("checked")})})}}function PX_customFields(){var a=this,b={customField:{fieldName_template:{classNames:"dynamic-added-field",fieldName:"px_",html:'<input class="dynamic-added-field" type="text" name="field_name" value=""/>',title:"Field name."},selectBox_template:{className_ofOptionsContainer:"px_select-options-container",label_addNewOption:'<span class="px_add_new_select_option px_addNewOption">+Add option</span>',newOptionInput_ClassName:"px_optionValue",htmlInput_addNewOption:'<input type="text" class="px_optionValue" name="px_add_new_select_option[]" value=""/>',removeOption:'<span class="px_removeOption">Remove</span>',removeOptionClassName:"px_removeOption"}},removeButton:{html:'<span class="remove-custom-field recent-added">Remove Field</span>'}},c={px_text:"Text",px_date:"Date",px_check_box:"Checkbox",px_icon_check_box:"Checkbox /w icons",px_radio_box:"Radio",px_select_box:"Select"};this.wpMediaLibrary,this.init=function(){a.postListAccordion(),a.initCustomFieldTemplate(),$j(".px-post-type-row").each(function(){$j(this).data("key");a.initRemoveButton($j(this)),
a.initRemoveOptionButton_selectBox($j(this)),$j(this).find(".px_field-box").each(function(){var c=$j(this);$j(this).find(".px_addNewOption")&&$j(this).find(".px_addNewOption").click(function(){var d=c.find(".px_optionValue").val();if(d){var e=d,f="px_options_"+c.data("type"),g=a.DataFields(f,"",e,"hidden"),h=c.data("type");if(h.match(/^px_icon_check_box(.*?)/)){var i="px_options_icon_"+c.data("type"),j=a.DataFields(i,"img-link","","hidden"),k='<li><div class="choose_photo_box checkbox-icon-option"><div class="imgContainer"></div><span class="px_choose_img">Add Icon <strong>(40x40)</strong></span> &nbsp;'+j+d+b.customField.selectBox_template.removeOption+g+"</div></li>";return c.find(".px_select-options-container").append(k),c.find(".px_optionValue").val(""),a.initRemoveOptionButton_selectBox($j(this)),void a.wpMediaLibrary.openMediaLibrary("thumb")}var k="<li>"+d+b.customField.selectBox_template.removeOption+g+"</li>";c.find(".px_select-options-container").append(k),c.find(".px_optionValue").val(""),a.initRemoveOptionButton_selectBox($j(this))}})})})},this.template_makeFieldBoxHtml=function(a,b,d,e,f,g){var h=$j(".px-post-type-row.active").find(".px_field-box."+f).length,i=$j(".px-post-type-row.active").find(".recent-added").length,j=i%2==0?"even":"";if(f.match(/^px_icon_check_box/))var k="px-icon-check-box "+j+" "+f;else if(f.match(/^px_radio_box/))var k="px-radio-box "+j+" "+f;else if(f.match(/^px_check_box/))var k="px-check-box "+j+" "+f;else if(f.match(/^px_select_box/))var k="px-select-box "+j+" "+f;else var k=j+" "+f;var l='<div class="px_field-box dynamic-added-box '+k+' " data-type="'+f+"_"+h+'" data-index="'+h+'">';return l+='<span class="px-error-msg"></span>',l+='<div class="inline">',l+="<label>"+d+"</label>"+b,"object"==typeof a?(l+=a.field_name,l+="<span>Type:</span><strong>"+c[g]+"</strong>",l+="</div>",l+=a.options,l+="</div>"):(l+=a,l+="<span>Type:</span><strong>"+c[g]+"</strong>",l+="</div>",l+="</div>")},this.postListAccordion=function(){$j(".px-button").click(function(b){return b.preventDefault(),b.stopPropagation(),a.checkForEmptyFields()&&$j("#lscf-custom-fields-form").submit(),!1}),$j(".px_innerContainer").each(function(){$j(this).click(function(){$j(this).find(".styledSelect").removeClass("active"),$j(this).find(".select").children("ul").hide()})}),$j(".px-post-type-row").each(function(){$j(this).click(function(a){$j(".styledSelect").removeClass("active"),$j(".select").children("ul").hide(),a.preventDefault(),a.stopPropagation();var b=$j(this),c=$j(this).find(".px_innerContainer").height()+57;return $j(this).find(".px_innerContainer").click(function(){return!1}),$j(this).hasClass("active")?($j(this).animate({height:30},380,function(){$j(this).removeClass("active ready")}),!1):($j(".px-post-type-row.active").animate({height:30},380),$j(".px-post-type-row").removeClass("active ready"),b.addClass("active"),void b.animate({height:c},380,function(){$j(this).attr({style:"height:auto"})}))})})},this.initHeight=function(a){var b=a.find(".custom_fields-container");b.height()+b.position().top>=a.height()&&a.css({height:"auto"})},this.checkForEmptyFields=function(){$j(".px_field-box").removeClass("px-error"),$j(".px-error-msg").hide();var a=document.getElementsByClassName("px-post-type-row active");if("undefined"==typeof a||null==a||a.length<=0)return!1;var b=a[0].getElementsByTagName("input");if(b)for(index in b)if("undefined"!=typeof b[index].name){var c=new RegExp("-name(.*?)$");if(b[index].name.match(c)&&""===b[index].value){var d=$j(b[index]).offset().top-80,e=$j(b[index]).closest(".px_field-box");return e.addClass("px-error"),e.find(".px-error-msg").text("Field is empty"),e.find(".px-error-msg").show(),$j("html, body").animate({scrollTop:d},400),!1}}return!0},this.initCustomFieldTemplate=function(){var b=$j(".px-post-type-row"),c=$j(".custom_fields-container");$j(".px_add-new-custom-field").each(function(d){b.eq(d).data("key");$j(this).click(function(){var e=b.eq(d).data("key"),f=$j(".PX_add-field-type").eq(d).find("option:selected").val().toLowerCase();switch(f){case"date":a.customFieldTemplate_date(c.eq(d),"px_date_"+e,"px_date",b.eq(d)),a.addDataFields_onInputBlur("px_field-box.px-date","px-date px_date","px_date_"+e,b.eq(d));break;case"text":a.customFieldTemplate_text(c.eq(d),"px_text_"+e,"px_text",b.eq(d)),a.addDataFields_onInputBlur("px_field-box.px-text","px-text px_text","px_text_"+e,b.eq(d));break;case"select-box":a.customFieldTemplate_select(c.eq(d),"px_select_box_"+e,"px_select_box",b.eq(d)),a.initAddNewOption_toSelectBox(b.eq(d),"px_select_box_"+e),a.addDataFields_onInputBlur("px_field-box.px-select-box","px-option px_select_box","px_select_box_"+e,b.eq(d));break;case"radio":a.customFieldTemplate_select(c.eq(d),"px_radio_box_"+e,"px_radio_box",b.eq(d)),a.initAddNewOption_toSelectBox(b.eq(d),"px_radio_box_"+e),a.addDataFields_onInputBlur("px_field-box.px-radio-box","px-option px_radio_box","px_radio_box_"+e,b.eq(d));break;case"checkbox":a.customFieldTemplate_select(c.eq(d),"px_check_box_"+e,"px_check_box",b.eq(d)),a.initAddNewOption_toSelectBox(b.eq(d),"px_check_box_"+e),a.addDataFields_onInputBlur("px_field-box.px-check-box","px-option px_check_box","px_check_box_"+e,b.eq(d));break;case"checkbox-icon":a.customFieldTemplate_select(c.eq(d),"px_icon_check_box_"+e,"px_icon_check_box",b.eq(d)),a.initAddNewOption_toSelectBox(b.eq(d),"px_icon_check_box_"+e),a.addDataFields_onInputBlur("px_field-box.px-icon-check-box","px-option px_icon_check_box","px_icon_check_box_"+e,b.eq(d))}a.initHeight(b.eq(d)),a.initRemoveButton(b.eq(d))})})},this.initRemoveButton=function(a){var b=a.find(".remove-custom-field"),c=a.find(".px_field-box");b.unbind("click"),b.each(function(a){$j(this).bind("click",function(){c.eq(a).remove(),$j(this).remove()})})},this.initRemoveOptionButton_selectBox=function(c){c.find("."+b.customField.selectBox_template.className_ofOptionsContainer).each(function(b){var d=c.eq(b).find(".px_select-options-container");c.eq(b).find(".px_removeOption");d.each(function(b){var d=$j(this).find(".px_removeOption"),e=$j(this);d.unbind("click"),$j(this).find(".px_removeOption").each(function(b){$j(this).bind("click",function(){var d=e.find("li").eq(b);d.css({boder:"5px solid red"}),d.remove(),a.initRemoveOptionButton_selectBox(c)})})})})},this.customOptions_generateTheOptionInputName=function(a,b){a.each(function(c){var d=a.data("key");$j(this).find(".px_select-options-container").find(".px-data-input").each(function(){$j(this).attr("name",b+d)})})},this.sanitize=function(a){var b=a.toLowerCase().replace(/([\!\@\#\$\%\^\&\*\(\[\)\]\{\-\}\\\/\:\;\+\=\.\<\,\>\?\~\`\'\" ]+)/g,"_");return b.replace(/[_]+$/,"")},this.DataFields=function(a,b,c,d,e,f){if("undefined"!=typeof e)var g=parseInt(f.data("index")),h=a+"["+g+"]";else var h=a+"[]";return"undefined"==typeof d&&(d="text"),'<input type="'+d+'" name="'+h+'" class="hide_px_dynamic-field '+b+'" value="'+c+'"/>'},this.addDataFields_onInputBlur=function(b,c,d,e){$j("."+b).each(function(e){var f=c.split(" "),g=$j("."+b).eq(e),h=$j("."+b).eq(e).find("."+f[0]);h.unbind("blur"),h.each(function(c){$j(this).bind("blur",function(){var h=a.sanitize($j(this).val());if($j("."+b).eq(e).find("."+f[0]+"-data").length>0)$j("."+b).eq(e).find("."+f[0]+"-data").eq(c).val(h);else{var i=a.DataFields(d,f[0]+"-data",h,"hidden",f[1],g);$j("."+b).eq(e).append(i)}})})})},this.initAddNewOption_toSelectBox=function(c,d){var e=c.find(".px_addNewOption");appendContainer=c.find("."+b.customField.selectBox_template.className_ofOptionsContainer),e.unbind("click"),e.each(function(d){$j(this).click(function(){var e=$j(this).closest(".px_field-box"),f=e.data("type"),g=e.find("."+b.customField.selectBox_template.newOptionInput_ClassName).val();if(g){var h=g,i="px_options_"+e.data("type"),j=a.DataFields(i,"",h,"hidden");if(f.match(/^px_icon_check_box(.*?)/)){var k="px_options_icon_"+e.data("type"),l=a.DataFields(k,"img-link","","hidden"),m='<li><div class="choose_photo_box checkbox-icon-option"><div class="imgContainer"></div><span class="px_choose_img">Add Icon <strong>(40x40)</strong></span> &nbsp;'+l+g+b.customField.selectBox_template.removeOption+j+"</div></li>";return appendContainer.eq(d).append(m),e.find("."+b.customField.selectBox_template.newOptionInput_ClassName).val(""),a.initRemoveOptionButton_selectBox(c),void a.wpMediaLibrary.openMediaLibrary("thumb")}var m="<li>"+g+b.customField.selectBox_template.removeOption+j+"</li>";appendContainer.eq(d).append(m),e.find("."+b.customField.selectBox_template.newOptionInput_ClassName).val(""),a.initRemoveOptionButton_selectBox(c)}})})},this.customFieldTemplate_date=function(c,d,e,f){var g=f.find("."+e).length,h=b;h.customField.fieldName_template.html='<input type="text" name="'+d+"-name["+g+']" class="'+h.customField.fieldName_template.classNames+" px-date "+e+'">';var i=a.template_makeFieldBoxHtml(h.customField.fieldName_template.html,h.removeButton.html,h.customField.fieldName_template.title,"px-date","px-date",e);c.prepend(i)},this.customFieldTemplate_text=function(c,d,e,f){var g=f.find("."+e).length,h=b;h.customField.fieldName_template.html='<input type="text" name="'+d+"-name["+g+']" class="'+h.customField.classNames+" px-text "+e+'">';var i=a.template_makeFieldBoxHtml(h.customField.fieldName_template.html,h.removeButton.html,h.customField.fieldName_template.title,"px-text","px-text",e);c.prepend(i)},this.customFieldTemplate_select=function(c,d,e,f){var g=f.find("."+e).length,h=b,i="",j={};h.customField.fieldName_template.html='<input type="text" name="'+d+"-name["+g+']" class="px-option '+e+'">',j.field_name=h.customField.fieldName_template.html,i='<ul class="'+h.customField.selectBox_template.className_ofOptionsContainer+'"></ul>',j.options=i,j.options+='<div class="px-option-add-new">',j.options+=h.customField.selectBox_template.htmlInput_addNewOption,j.options+=h.customField.selectBox_template.label_addNewOption,j.options+="</div>";var k=a.template_makeFieldBoxHtml(j,h.removeButton.html,h.customField.fieldName_template.title,b.customField.selectBox_template.className_ofOptionsContainer,d,e);c.prepend(k)}}if(jQuery(document).ready(function(){filterThemeSettings()}),getCookie("px_new_custom_post")){var cookieAddedNewCustomPost=getCookie("px_new_custom_post");1==cookieAddedNewCustomPost&&alert("A new Custom Post Type was added!\nPlease reset your Permalinks to avoid 404 on new created custom post type"),document.cookie="px_new_custom_post=0"}var $j=jQuery;$j(document).ready(function(){var a=new ajaxCallbacks,b=new PX_pluginLF;a.template=b.template,b.callbacks=a,b.init();var c=new mediaLibrary,d=new PX_customFields;d.wpMediaLibrary=c,d.init();var e=new LscfSettings;e.init(),e.saveSettings(),LscfWooCommerce.prototype.init_tax_subcategories=function(){return a.init_tax_subcategories()},$j(".initCalendar").datepicker(),$j(".lscf-colorpick").colorPicker()});var isStep2Active=new is_step2_active,LscfWooComm=new LscfWooCommerce;jQuery(document).ready(function(){var a=new ImportExportCustomFields;a.init()});